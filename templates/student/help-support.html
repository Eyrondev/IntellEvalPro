<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <title>Help & Support | IntellEvalPro</title>
  
  <!-- Favicon -->
  <link rel="icon" type="image/png" href="{{ url_for('static', filename='images/nclogo.png') }}">
  <link rel="shortcut icon" type="image/png" href="{{ url_for('static', filename='images/nclogo.png') }}">
  <link rel="apple-touch-icon" href="{{ url_for('static', filename='images/nclogo.png') }}">

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  
  <!-- Font Awesome Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"/>
  
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- jQuery -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  
  <!-- SweetAlert2 -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.7.12/dist/sweetalert2.min.css">
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.7.12/dist/sweetalert2.all.min.js"></script>
  
  <script>
    tailwind.config = {
      theme: {
        fontFamily: {
          'sans': ['Inter', 'system-ui', 'sans-serif'],
        },
        extend: {
          colors: {
            primary: {
              50: '#e6f0ff',
              100: '#b3d1ff',
              200: '#80b3ff',
              300: '#4d94ff', 
              400: '#1a75ff',
              500: '#0059cc',
              600: '#004db3',
              700: '#004099',
              800: '#003380',
              900: '#002966'
            }
          }
        }
      }
    }
  </script>
</head>
<body class="bg-gray-50">
  <div class="min-h-screen flex">
    <!-- Sidebar Navigation -->
    <div id="sidebar-container"></div>
    
    <!-- Main content -->
    <div class="flex-1 lg:ml-64">
      <!-- Header -->
      <div id="header-container"></div>
      
      <!-- Page Content -->
      <main class="p-4 md:p-6">
        <!-- Page Title -->
        <div class="mb-6">
          <h1 class="text-2xl md:text-3xl font-bold text-gray-900 mb-2">Help & Support</h1>
          <p class="text-sm md:text-base text-gray-600">Find answers to common questions and get instant assistance with our AI-powered chatbot</p>
        </div>

        <!-- Quick Actions Banner -->
        <div class="bg-gradient-to-r from-primary-600 to-primary-700 rounded-xl shadow-lg p-6 mb-8 text-white">
          <div class="flex flex-col md:flex-row items-start md:items-center justify-between">
            <div class="mb-4 md:mb-0">
              <h2 class="text-xl md:text-2xl font-bold mb-2 flex items-center">
                <i class="fas fa-headset mr-3"></i>
                Need Quick Help?
              </h2>
              <p class="text-primary-100 text-sm md:text-base">Chat with our AI Assistant for instant answers to your evaluation questions</p>
            </div>
            <button onclick="document.getElementById('chat-toggle-btn').click()" class="bg-white text-primary-600 px-6 py-3 rounded-lg font-semibold hover:bg-primary-50 transition-colors flex items-center shadow-lg">
              <i class="fas fa-robot mr-2"></i>
              Start Chat
            </button>
          </div>
        </div>

        <!-- Quick Help Cards -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6 mb-8">
          <!-- Getting Started -->
          <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-5 hover:shadow-md hover:border-primary-300 transition-all cursor-pointer group" onclick="scrollToSection('getting-started')">
            <div class="flex items-start mb-3">
              <div class="p-2.5 rounded-lg bg-blue-100 group-hover:bg-blue-200 transition-colors">
                <i class="fas fa-rocket text-blue-600 text-lg"></i>
              </div>
            </div>
            <h3 class="text-base font-semibold text-gray-900 mb-2">Getting Started</h3>
            <p class="text-sm text-gray-600">Learn how to navigate and use the evaluation system</p>
          </div>

          <!-- Evaluation Help -->
          <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-5 hover:shadow-md hover:border-primary-300 transition-all cursor-pointer group" onclick="scrollToSection('evaluation-help')">
            <div class="flex items-start mb-3">
              <div class="p-2.5 rounded-lg bg-green-100 group-hover:bg-green-200 transition-colors">
                <i class="fas fa-clipboard-check text-green-600 text-lg"></i>
              </div>
            </div>
            <h3 class="text-base font-semibold text-gray-900 mb-2">Completing Evaluations</h3>
            <p class="text-sm text-gray-600">Step-by-step guide to rating your faculty</p>
          </div>

          <!-- Dashboard & Progress -->
          <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-5 hover:shadow-md hover:border-primary-300 transition-all cursor-pointer group" onclick="scrollToSection('dashboard-progress')">
            <div class="flex items-start mb-3">
              <div class="p-2.5 rounded-lg bg-purple-100 group-hover:bg-purple-200 transition-colors">
                <i class="fas fa-chart-line text-purple-600 text-lg"></i>
              </div>
            </div>
            <h3 class="text-base font-semibold text-gray-900 mb-2">Track Your Progress</h3>
            <p class="text-sm text-gray-600">Monitor your evaluation completion status</p>
          </div>

          <!-- Technical Support -->
          <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-5 hover:shadow-md hover:border-primary-300 transition-all cursor-pointer group" onclick="scrollToSection('technical-issues')">
            <div class="flex items-start mb-3">
              <div class="p-2.5 rounded-lg bg-orange-100 group-hover:bg-orange-200 transition-colors">
                <i class="fas fa-tools text-orange-600 text-lg"></i>
              </div>
            </div>
            <h3 class="text-base font-semibold text-gray-900 mb-2">Technical Issues</h3>
            <p class="text-sm text-gray-600">Troubleshoot common technical problems</p>
          </div>
        </div>

        <!-- FAQ Section -->
        <div class="bg-white rounded-xl shadow-sm border border-gray-200 mb-6">
          <div class="p-4 md:p-6 border-b border-gray-200">
            <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
              <div>
                <h2 class="text-lg md:text-xl font-semibold text-gray-900">Frequently Asked Questions</h2>
                <p class="text-sm text-gray-600 mt-1">Browse common questions or search for specific topics</p>
              </div>
              <div class="flex items-center gap-2 text-sm">
                <span class="bg-primary-100 text-primary-700 px-3 py-1.5 rounded-full font-medium">
                  <i class="fas fa-question-circle mr-1"></i>
                  <span id="total-faqs">24</span> FAQs
                </span>
              </div>
            </div>
          </div>
          <div class="p-4 md:p-6">
            <!-- Search FAQ -->
            <div class="mb-6">
              <div class="relative">
                <input type="text" id="faq-search" placeholder="Search for answers (e.g., 'how to submit evaluation', 'rating scale', 'anonymous')..." class="w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 text-sm md:text-base">
                <i class="fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
              </div>
              <p class="text-xs text-gray-500 mt-2">
                <i class="fas fa-lightbulb text-yellow-500 mr-1"></i>
                Tip: Try our AI Assistant for instant, personalized answers!
              </p>
            </div>

            <!-- Getting Started FAQs -->
            <div id="getting-started" class="mb-8">
              <h3 class="text-lg font-semibold text-gray-900 mb-4 flex items-center">
                <i class="fas fa-rocket text-primary-600 mr-2"></i>
                Getting Started
              </h3>
              <div class="space-y-4">
                <div class="faq-item border border-gray-200 rounded-lg">
                  <button class="faq-question w-full text-left px-4 py-3 font-medium text-gray-900 hover:bg-gray-50 focus:outline-none flex items-center justify-between transition-colors">
                    <span class="flex items-center">
                      <i class="fas fa-sign-in-alt text-primary-600 mr-3 text-sm"></i>
                      How do I log in to IntellEvalPro?
                    </span>
                    <i class="fas fa-chevron-down transform transition-transform text-gray-400"></i>
                  </button>
                  <div class="faq-answer hidden px-4 pb-4 pt-2 text-gray-600">
                    <p class="leading-relaxed">To log in:</p>
                    <ol class="list-decimal list-inside mt-2 space-y-1 ml-2">
                      <li>Go to the IntellEvalPro login page</li>
                      <li>Enter your <strong>Student ID</strong> (e.g., 2022-0215) as username</li>
                      <li>Enter your password (default: your birthday in MMDDYYYY format)</li>
                      <li>Click "Login" button</li>
                    </ol>
                    <div class="mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded-lg">
                      <p class="text-sm text-yellow-800">
                        <i class="fas fa-exclamation-triangle mr-1"></i>
                        <strong>Forgot password?</strong> Click "Forgot Password" link or contact your guidance counselor for assistance.
                      </p>
                    </div>
                  </div>
                </div>

                <div class="faq-item border border-gray-200 rounded-lg">
                  <button class="faq-question w-full text-left px-4 py-3 font-medium text-gray-900 hover:bg-gray-50 focus:outline-none flex items-center justify-between transition-colors">
                    <span class="flex items-center">
                      <i class="fas fa-info-circle text-primary-600 mr-3 text-sm"></i>
                      What is the evaluation system for?
                    </span>
                    <i class="fas fa-chevron-down transform transition-transform text-gray-400"></i>
                  </button>
                  <div class="faq-answer hidden px-4 pb-4 pt-2 text-gray-600">
                    <p class="leading-relaxed mb-3">IntellEvalPro allows you to provide <strong>anonymous feedback</strong> on your faculty's teaching performance. Your evaluations help:</p>
                    <ul class="space-y-2">
                      <li class="flex items-start">
                        <i class="fas fa-check-circle text-green-500 mr-2 mt-0.5"></i>
                        <span>Improve teaching quality and educational experience</span>
                      </li>
                      <li class="flex items-start">
                        <i class="fas fa-check-circle text-green-500 mr-2 mt-0.5"></i>
                        <span>Faculty members enhance their teaching methods</span>
                      </li>
                      <li class="flex items-start">
                        <i class="fas fa-check-circle text-green-500 mr-2 mt-0.5"></i>
                        <span>Administration make data-driven decisions</span>
                      </li>
                      <li class="flex items-start">
                        <i class="fas fa-check-circle text-green-500 mr-2 mt-0.5"></i>
                        <span>Maintain academic excellence standards</span>
                      </li>
                    </ul>
                    <div class="mt-3 p-3 bg-blue-50 border border-blue-200 rounded-lg">
                      <p class="text-sm text-blue-800">
                        <i class="fas fa-shield-alt mr-1"></i>
                        Your responses are <strong>100% anonymous and confidential</strong>. Faculty cannot see who submitted specific ratings.
                      </p>
                    </div>
                  </div>
                </div>

                <div class="faq-item border border-gray-200 rounded-lg">
                  <button class="faq-question w-full text-left px-4 py-3 font-medium text-gray-900 hover:bg-gray-50 focus:outline-none flex items-center justify-between">
                    How do I navigate the student dashboard?
                    <i class="fas fa-chevron-down transform transition-transform"></i>
                  </button>
                  <div class="faq-answer hidden px-4 pb-3 text-gray-600">
                    The student dashboard displays your evaluation progress, pending evaluations, and deadline information. Use the sidebar navigation to access: <strong>Dashboard</strong> (overview), <strong>Pending Evaluations</strong> (faculty to evaluate), <strong>My Evaluations</strong> (history), and <strong>Help & Support</strong>. The dashboard shows a progress bar indicating how many evaluations you've completed.
                  </div>
                </div>

                <div class="faq-item border border-gray-200 rounded-lg">
                  <button class="faq-question w-full text-left px-4 py-3 font-medium text-gray-900 hover:bg-gray-50 focus:outline-none flex items-center justify-between">
                    What happens if there's no active evaluation period?
                    <i class="fas fa-chevron-down transform transition-transform"></i>
                  </button>
                  <div class="faq-answer hidden px-4 pb-3 text-gray-600">
                    If there's no active evaluation period, you'll see a notification page indicating that evaluations are not currently available. Check back during Mid-term or Final evaluation periods, or contact your academic office for information about upcoming evaluation schedules.
                  </div>
                </div>
              </div>
            </div>

            <!-- Evaluation Help FAQs -->
            <div id="evaluation-help" class="mb-8">
              <h3 class="text-lg font-semibold text-gray-900 mb-4 flex items-center">
                <i class="fas fa-clipboard-check text-primary-600 mr-2"></i>
                Evaluation Help
              </h3>
              <div class="space-y-4">
                <div class="faq-item border border-gray-200 rounded-lg">
                  <button class="faq-question w-full text-left px-4 py-3 font-medium text-gray-900 hover:bg-gray-50 focus:outline-none flex items-center justify-between">
                    How do I complete an evaluation?
                    <i class="fas fa-chevron-down transform transition-transform"></i>
                  </button>
                  <div class="faq-answer hidden px-4 pb-3 text-gray-600">
                    Navigate to <strong>Pending Evaluations</strong> from the sidebar. You'll see all faculty assigned to you for the current evaluation period. Click <strong>"Start Evaluation"</strong> on a faculty card to begin. Rate each criterion using the 1-5 scale (1 = Strongly Disagree, 5 = Strongly Agree), provide optional comments, then click <strong>"Submit Evaluation"</strong>. All rating fields must be completed before submission.
                  </div>
                </div>

                <div class="faq-item border border-gray-200 rounded-lg">
                  <button class="faq-question w-full text-left px-4 py-3 font-medium text-gray-900 hover:bg-gray-50 focus:outline-none flex items-center justify-between">
                    What do the rating numbers mean?
                    <i class="fas fa-chevron-down transform transition-transform"></i>
                  </button>
                  <div class="faq-answer hidden px-4 pb-3 text-gray-600">
                    The evaluation uses a 5-point rating scale: <strong>5 = Strongly Agree</strong> (Excellent), <strong>4 = Agree</strong> (Very Good), <strong>3 = Neutral</strong> (Satisfactory), <strong>2 = Disagree</strong> (Needs Improvement), <strong>1 = Strongly Disagree</strong> (Poor). Choose the rating that best reflects your experience with each criterion.
                  </div>
                </div>

                <div class="faq-item border border-gray-200 rounded-lg">
                  <button class="faq-question w-full text-left px-4 py-3 font-medium text-gray-900 hover:bg-gray-50 focus:outline-none flex items-center justify-between">
                    Can I save my evaluation and continue later?
                    <i class="fas fa-chevron-down transform transition-transform"></i>
                  </button>
                  <div class="faq-answer hidden px-4 pb-3 text-gray-600">
                    Yes! The evaluation form has an <strong>"Save Progress"</strong> button. Your responses are automatically saved as you fill out the form. You can safely leave and return to continue your evaluation before the deadline. Your progress is preserved until you click "Submit Evaluation" to finalize it.
                  </div>
                </div>

                <div class="faq-item border border-gray-200 rounded-lg">
                  <button class="faq-question w-full text-left px-4 py-3 font-medium text-gray-900 hover:bg-gray-50 focus:outline-none flex items-center justify-between">
                    Are my evaluations anonymous?
                    <i class="fas fa-chevron-down transform transition-transform"></i>
                  </button>
                  <div class="faq-answer hidden px-4 pb-3 text-gray-600">
                    <strong>Yes, absolutely!</strong> All student evaluations are completely anonymous. Faculty members and administrators can only see aggregated results and cannot identify who submitted specific ratings or comments. Your identity is fully protected, so please provide honest, constructive feedback.
                  </div>
                </div>

                <div class="faq-item border border-gray-200 rounded-lg">
                  <button class="faq-question w-full text-left px-4 py-3 font-medium text-gray-900 hover:bg-gray-50 focus:outline-none flex items-center justify-between">
                    What happens if I miss the evaluation deadline?
                    <i class="fas fa-chevron-down transform transition-transform"></i>
                  </button>
                  <div class="faq-answer hidden px-4 pb-3 text-gray-600">
                    Once the evaluation period closes, you cannot submit new evaluations or modify existing ones. The dashboard shows days remaining until the deadline. If you miss it due to special circumstances, contact your academic office or guidance counselor for assistance.
                  </div>
                </div>

                <div class="faq-item border border-gray-200 rounded-lg">
                  <button class="faq-question w-full text-left px-4 py-3 font-medium text-gray-900 hover:bg-gray-50 focus:outline-none flex items-center justify-between">
                    Can I change my evaluation after submitting it?
                    <i class="fas fa-chevron-down transform transition-transform"></i>
                  </button>
                  <div class="faq-answer hidden px-4 pb-3 text-gray-600">
                    No, once you click "Submit Evaluation," your responses are final and cannot be modified. This ensures the integrity of the evaluation process. Make sure to review all your ratings and comments carefully before submitting.
                  </div>
                </div>

                <div class="faq-item border border-gray-200 rounded-lg">
                  <button class="faq-question w-full text-left px-4 py-3 font-medium text-gray-900 hover:bg-gray-50 focus:outline-none flex items-center justify-between">
                    How can I view my evaluation history?
                    <i class="fas fa-chevron-down transform transition-transform"></i>
                  </button>
                  <div class="faq-answer hidden px-4 pb-3 text-gray-600">
                    Go to <strong>My Evaluations</strong> from the sidebar to view your complete evaluation history. You can see all completed evaluations with details including course, faculty, evaluation period, and completion date. Use filters to search by status, period, or course.
                  </div>
                </div>
              </div>
            </div>

            <!-- Dashboard & Progress -->
            <div id="dashboard-progress" class="mb-8">
              <h3 class="text-lg font-semibold text-gray-900 mb-4 flex items-center">
                <i class="fas fa-chart-line text-primary-600 mr-2"></i>
                Dashboard & Progress Tracking
              </h3>
              <div class="space-y-4">
                <div class="faq-item border border-gray-200 rounded-lg">
                  <button class="faq-question w-full text-left px-4 py-3 font-medium text-gray-900 hover:bg-gray-50 focus:outline-none flex items-center justify-between">
                    What information does the dashboard show?
                    <i class="fas fa-chevron-down transform transition-transform"></i>
                  </button>
                  <div class="faq-answer hidden px-4 pb-3 text-gray-600">
                    Your dashboard displays: <strong>Welcome banner</strong> with current evaluation period, <strong>Progress overview</strong> showing completed vs. total evaluations with percentage, <strong>Evaluation deadline</strong> with days remaining, and <strong>Quick access cards</strong> to start pending evaluations. The circular progress indicator shows your completion status at a glance.
                  </div>
                </div>

                <div class="faq-item border border-gray-200 rounded-lg">
                  <button class="faq-question w-full text-left px-4 py-3 font-medium text-gray-900 hover:bg-gray-50 focus:outline-none flex items-center justify-between">
                    How is my progress calculated?
                    <i class="fas fa-chevron-down transform transition-transform"></i>
                  </button>
                  <div class="faq-answer hidden px-4 pb-3 text-gray-600">
                    Progress is calculated as (Completed Evaluations ÷ Total Assigned Evaluations) × 100. For example, if you have 8 faculty to evaluate and completed 6, your progress is 75%. The dashboard updates in real-time as you complete evaluations.
                  </div>
                </div>

                <div class="faq-item border border-gray-200 rounded-lg">
                  <button class="faq-question w-full text-left px-4 py-3 font-medium text-gray-900 hover:bg-gray-50 focus:outline-none flex items-center justify-between">
                    What are the filter options in Pending Evaluations?
                    <i class="fas fa-chevron-down transform transition-transform"></i>
                  </button>
                  <div class="faq-answer hidden px-4 pb-3 text-gray-600">
                    Click the <strong>"Filter"</strong> button to access filters including: <strong>Department</strong> (filter by academic department), <strong>Course</strong> (specific courses), <strong>Section</strong>, <strong>Status</strong> (Not Started/In Progress/Completed), and <strong>Search</strong> (find by faculty name or course code). Use "Clear All" to reset filters.
                  </div>
                </div>

                <div class="faq-item border border-gray-200 rounded-lg">
                  <button class="faq-question w-full text-left px-4 py-3 font-medium text-gray-900 hover:bg-gray-50 focus:outline-none flex items-center justify-between">
                    How do I know which evaluations are urgent?
                    <i class="fas fa-chevron-down transform transition-transform"></i>
                  </button>
                  <div class="faq-answer hidden px-4 pb-3 text-gray-600">
                    The system uses color-coded indicators: <strong>Red badges</strong> appear when 3 or fewer days remain until deadline, <strong>Yellow badges</strong> for 4-7 days, and <strong>Green badges</strong> for more than 7 days. The dashboard banner also shows the total days remaining for the evaluation period.
                  </div>
                </div>
              </div>
            </div>

            <!-- Technical Issues -->
            <div id="technical-issues" class="mb-8">
              <h3 class="text-lg font-semibold text-gray-900 mb-4 flex items-center">
                <i class="fas fa-tools text-primary-600 mr-2"></i>
                Technical Issues
              </h3>
              <div class="space-y-4">
                <div class="faq-item border border-gray-200 rounded-lg">
                  <button class="faq-question w-full text-left px-4 py-3 font-medium text-gray-900 hover:bg-gray-50 focus:outline-none flex items-center justify-between">
                    What should I do if the system is running slowly?
                    <i class="fas fa-chevron-down transform transition-transform"></i>
                  </button>
                  <div class="faq-answer hidden px-4 pb-3 text-gray-600">
                    Try refreshing your browser page (F5 or Ctrl+R), clearing your browser cache, or using a different browser (Chrome, Firefox, Edge). Ensure you have a stable internet connection. If the problem persists during peak times, try accessing the system during off-peak hours or contact technical support.
                  </div>
                </div>

                <div class="faq-item border border-gray-200 rounded-lg">
                  <button class="faq-question w-full text-left px-4 py-3 font-medium text-gray-900 hover:bg-gray-50 focus:outline-none flex items-center justify-between">
                    I can't see my faculty in the pending evaluations list. What should I do?
                    <i class="fas fa-chevron-down transform transition-transform"></i>
                  </button>
                  <div class="faq-answer hidden px-4 pb-3 text-gray-600">
                    First, verify that an evaluation period is active (check the dashboard for period dates). If the period is active but you don't see your faculty, try clicking the <strong>"Refresh List"</strong> button. If they still don't appear, ensure you're officially enrolled in your courses and contact your academic office to verify your enrollment and faculty assignments.
                  </div>
                </div>

                <div class="faq-item border border-gray-200 rounded-lg">
                  <button class="faq-question w-full text-left px-4 py-3 font-medium text-gray-900 hover:bg-gray-50 focus:outline-none flex items-center justify-between">
                    How do I reset my password?
                    <i class="fas fa-chevron-down transform transition-transform"></i>
                  </button>
                  <div class="faq-answer hidden px-4 pb-3 text-gray-600">
                    Click <strong>"Forgot Password"</strong> on the login page. Enter your registered email address to receive a password reset link. Follow the instructions in the email to create a new password. If you don't receive the email, check your spam folder or contact your institution's IT support.
                  </div>
                </div>

                <div class="faq-item border border-gray-200 rounded-lg">
                  <button class="faq-question w-full text-left px-4 py-3 font-medium text-gray-900 hover:bg-gray-50 focus:outline-none flex items-center justify-between">
                    The evaluation form won't submit. What should I do?
                    <i class="fas fa-chevron-down transform transition-transform"></i>
                  </button>
                  <div class="faq-answer hidden px-4 pb-3 text-gray-600">
                    Make sure all required rating fields are completed (you must rate all criteria). Check for any error messages displayed on the form. Ensure your internet connection is stable. Try clicking "Save Progress" first, then refresh the page and submit again. If the issue persists, contact support before the deadline.
                  </div>
                </div>

                <div class="faq-item border border-gray-200 rounded-lg">
                  <button class="faq-question w-full text-left px-4 py-3 font-medium text-gray-900 hover:bg-gray-50 focus:outline-none flex items-center justify-between">
                    Does the system work on mobile devices?
                    <i class="fas fa-chevron-down transform transition-transform"></i>
                  </button>
                  <div class="faq-answer hidden px-4 pb-3 text-gray-600">
                    Yes! IntellEvalPro is fully responsive and works on smartphones and tablets. The evaluation form is optimized for touch screens with larger tap targets. For the best experience, use landscape mode on phones when filling out evaluations.
                  </div>
                </div>

                <div class="faq-item border border-gray-200 rounded-lg">
                  <button class="faq-question w-full text-left px-4 py-3 font-medium text-gray-900 hover:bg-gray-50 focus:outline-none flex items-center justify-between">
                    What browsers are supported?
                    <i class="fas fa-chevron-down transform transition-transform"></i>
                  </button>
                  <div class="faq-answer hidden px-4 pb-3 text-gray-600">
                    IntellEvalPro works best on modern browsers including Google Chrome, Mozilla Firefox, Microsoft Edge, and Safari. Make sure your browser is updated to the latest version for optimal performance and security.
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </main>
      
      <!-- Footer -->
      <div id="footer-container"></div>
    </div>
  </div>

  <!-- Overlay for mobile sidebar -->
  <div id="sidebar-overlay" class="fixed inset-0 z-30 bg-black bg-opacity-50 hidden lg:hidden"></div>

  <!-- AI Chatbot Widget -->
  <div id="ai-chatbot-container" class="fixed bottom-4 md:bottom-6 right-4 md:right-6 z-50">
    <!-- Chat Button -->
    <button id="chat-toggle-btn" class="bg-gradient-to-r from-primary-600 to-primary-700 text-white rounded-full p-3 md:p-4 shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105 flex items-center justify-center group">
      <i class="fas fa-robot text-xl md:text-2xl"></i>
      <span class="ml-2 font-medium hidden md:inline text-sm lg:text-base">Ask AI Assistant</span>
      <span class="absolute -top-1 -right-1 w-3 h-3 bg-green-400 rounded-full border-2 border-white animate-pulse"></span>
    </button>

    <!-- Chat Window -->
    <div id="chat-window" class="hidden fixed bottom-16 md:bottom-20 right-4 md:right-6 w-[calc(100vw-2rem)] md:w-96 bg-white rounded-2xl shadow-2xl border border-gray-200 overflow-hidden flex flex-col" style="height: calc(100vh - 8rem); max-height: 600px;">
      <!-- Chat Header -->
      <div class="bg-gradient-to-r from-primary-600 to-primary-700 text-white p-4 flex items-center justify-between">
        <div class="flex items-center">
          <div class="w-10 h-10 bg-white rounded-full flex items-center justify-center mr-3 animate-pulse">
            <i class="fas fa-robot text-primary-600 text-xl"></i>
          </div>
          <div>
            <h3 class="font-semibold text-base md:text-lg">IntellEval AI Assistant</h3>
            <p class="text-xs text-primary-100 flex items-center">
              <span class="w-2 h-2 bg-green-400 rounded-full mr-1.5 animate-pulse"></span>
              Online • Powered by Gemini AI
            </p>
          </div>
        </div>
        <button id="chat-close-btn" class="text-white hover:bg-white hover:bg-opacity-20 rounded-full p-2 transition-colors">
          <i class="fas fa-times text-lg"></i>
        </button>
      </div>

      <!-- Chat Messages -->
      <div id="chat-messages" class="flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50">
        <!-- Welcome Message -->
        <div class="flex items-start animate-fadeIn">
          <div class="w-8 h-8 bg-gradient-to-br from-primary-500 to-primary-600 rounded-full flex items-center justify-center mr-2 flex-shrink-0 shadow-sm">
            <i class="fas fa-robot text-white text-sm"></i>
          </div>
          <div class="bg-white rounded-lg rounded-tl-none p-3 shadow-sm max-w-[85%] border border-gray-100">
            <p class="text-sm text-gray-800 leading-relaxed">
              👋 <strong>Hello!</strong> I'm your IntellEvalPro AI Assistant.
            </p>
            <p class="text-sm text-gray-700 mt-2 leading-relaxed">
              I can help you with:
            </p>
            <ul class="text-sm text-gray-700 mt-2 space-y-1 ml-2">
              <li>• <strong>Evaluation questions</strong> - How to rate faculty, submit evaluations</li>
              <li>• <strong>Navigation help</strong> - Finding features and pages</li>
              <li>• <strong>Technical issues</strong> - Login problems, system errors</li>
              <li>• <strong>Account help</strong> - Password reset, profile updates</li>
            </ul>
            <p class="text-sm text-gray-600 mt-3 italic">
              💡 Try asking: "How do I submit an evaluation?" or "What does the rating scale mean?"
            </p>
          </div>
        </div>

        <!-- Quick Action Buttons -->
        <div class="flex flex-wrap gap-2 px-2">
          <button class="quick-question-btn text-xs bg-primary-50 hover:bg-primary-100 text-primary-700 px-3 py-2 rounded-full border border-primary-200 transition-colors">
            How do I complete evaluations?
          </button>
          <button class="quick-question-btn text-xs bg-primary-50 hover:bg-primary-100 text-primary-700 px-3 py-2 rounded-full border border-primary-200 transition-colors">
            What's the rating scale?
          </button>
          <button class="quick-question-btn text-xs bg-primary-50 hover:bg-primary-100 text-primary-700 px-3 py-2 rounded-full border border-primary-200 transition-colors">
            Are evaluations anonymous?
          </button>
        </div>
      </div>

      <!-- Chat Input -->
      <div class="border-t border-gray-200 p-3 md:p-4 bg-white">
        <form id="chat-form" class="flex items-center space-x-2">
          <input 
            type="text" 
            id="chat-input" 
            placeholder="Type your question here..." 
            class="flex-1 px-3 md:px-4 py-2 md:py-2.5 border border-gray-300 rounded-full focus:ring-2 focus:ring-primary-500 focus:border-primary-500 text-sm"
            autocomplete="off"
          />
          <button 
            type="submit" 
            id="chat-send-btn"
            class="bg-primary-600 text-white rounded-full p-2 md:p-2.5 hover:bg-primary-700 active:scale-95 transition-all disabled:opacity-50 disabled:cursor-not-allowed w-9 h-9 md:w-10 md:h-10 flex items-center justify-center shadow-md"
          >
            <i class="fas fa-paper-plane text-sm"></i>
          </button>
        </form>
        <p class="text-xs text-gray-500 mt-2 text-center flex items-center justify-center">
          <i class="fas fa-shield-alt text-gray-400 mr-1"></i>
          AI responses are based on IntellEvalPro documentation
        </p>
      </div>
    </div>
  </div>

  <!-- Include loading animation and unified navigation scripts -->
  <script src="{{ url_for('static', filename='js/loading-animation.js') }}"></script>
  <script src="{{ url_for('static', filename='js/student-navigation-unified.js') }}"></script>
  
  <!-- Prevent logout on browser back button -->
  <script src="{{ url_for('static', filename='js/prevent-back-logout.js') }}"></script>

  <!-- Session Timeout Monitor (Auto-logout after 1 hour) -->
  <script src="{{ url_for('static', filename='js/session-timeout.js') }}"></script>
  
  <script>
    // Initialize navigation for help & support page
    loadStudentNavigation('help-support');
    
    // Page-specific functionality
    $(document).ready(function() {
      $('#footer-container').load('/student/footer');

      // FAQ functionality
      $('.faq-question').click(function() {
        const answer = $(this).next('.faq-answer');
        const icon = $(this).find('i.fa-chevron-down');
        
        // Toggle current FAQ
        answer.slideToggle();
        icon.toggleClass('rotate-180');
      });

      // FAQ search functionality
      $('#faq-search').on('input', function() {
        const searchTerm = $(this).val().toLowerCase();
        
        $('.faq-item').each(function() {
          const questionText = $(this).find('.faq-question').text().toLowerCase();
          const answerText = $(this).find('.faq-answer').text().toLowerCase();
          
          if (questionText.includes(searchTerm) || answerText.includes(searchTerm)) {
            $(this).show();
          } else {
            $(this).hide();
          }
        });
      });
    });

    function scrollToSection(sectionId) {
      const element = document.getElementById(sectionId);
      if (element) {
        element.scrollIntoView({ 
          behavior: 'smooth',
          block: 'start'
        });
      }
    }

    // AI Chatbot Functionality
    $(document).ready(function() {
      const chatToggleBtn = $('#chat-toggle-btn');
      const chatWindow = $('#chat-window');
      const chatCloseBtn = $('#chat-close-btn');
      const chatForm = $('#chat-form');
      const chatInput = $('#chat-input');
      const chatMessages = $('#chat-messages');
      const chatSendBtn = $('#chat-send-btn');

      // Toggle chat window
      chatToggleBtn.click(function() {
        chatWindow.toggleClass('hidden');
        if (!chatWindow.hasClass('hidden')) {
          chatInput.focus();
          // Add entrance animation
          chatWindow.addClass('animate-slideUp');
        }
      });

      // Close chat window
      chatCloseBtn.click(function() {
        chatWindow.addClass('hidden');
      });

      // Quick question buttons
      $(document).on('click', '.quick-question-btn', function() {
        const question = $(this).text();
        chatInput.val(question);
        chatForm.submit();
      });

      // Handle chat form submission
      chatForm.submit(function(e) {
        e.preventDefault();
        const message = chatInput.val().trim();
        
        if (!message) return;

        // Add user message to chat
        addUserMessage(message);
        chatInput.val('');
        
        // Remove quick action buttons after first message
        $('.quick-question-btn').parent().fadeOut();
        
        // Disable input while processing
        chatInput.prop('disabled', true);
        chatSendBtn.prop('disabled', true);
        
        // Show typing indicator
        showTypingIndicator();

        // Send message to AI
        $.ajax({
          url: '/api/ai-support-chat',
          method: 'POST',
          contentType: 'application/json',
          data: JSON.stringify({ 
            message: message,
            context: 'student_help_support',
            role: 'student'
          }),
          success: function(response) {
            removeTypingIndicator();
            if (response.success) {
              addAiMessage(response.reply);
            } else {
              addAiMessage('I apologize, but I encountered an error. Please try rephrasing your question or check the FAQ sections above.');
            }
          },
          error: function() {
            removeTypingIndicator();
            addAiMessage('I\'m having trouble connecting. While I get back online, try browsing the FAQ sections above or use the search feature.');
          },
          complete: function() {
            chatInput.prop('disabled', false);
            chatSendBtn.prop('disabled', false);
            chatInput.focus();
          }
        });
      });

      function addUserMessage(message) {
        const timestamp = new Date().toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' });
        const messageHtml = `
          <div class="flex items-start justify-end animate-fadeIn">
            <div class="bg-gradient-to-r from-primary-600 to-primary-700 text-white rounded-lg rounded-tr-none p-3 shadow-sm max-w-[85%]">
              <p class="text-sm leading-relaxed">${escapeHtml(message)}</p>
              <p class="text-xs text-primary-100 mt-1 text-right">${timestamp}</p>
            </div>
            <div class="w-8 h-8 bg-primary-600 rounded-full flex items-center justify-center ml-2 flex-shrink-0 shadow-sm">
              <i class="fas fa-user text-white text-xs"></i>
            </div>
          </div>
        `;
        chatMessages.append(messageHtml);
        scrollChatToBottom();
      }

      function addAiMessage(message) {
        const timestamp = new Date().toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' });
        const messageHtml = `
          <div class="flex items-start animate-fadeIn">
            <div class="w-8 h-8 bg-gradient-to-br from-primary-500 to-primary-600 rounded-full flex items-center justify-center mr-2 flex-shrink-0 shadow-sm">
              <i class="fas fa-robot text-white text-xs"></i>
            </div>
            <div class="bg-white rounded-lg rounded-tl-none p-3 shadow-sm max-w-[85%] border border-gray-100">
              <div class="text-sm text-gray-800 leading-relaxed">${formatAiMessage(message)}</div>
              <p class="text-xs text-gray-500 mt-1">${timestamp}</p>
            </div>
          </div>
        `;
        chatMessages.append(messageHtml);
        scrollChatToBottom();
      }

      function showTypingIndicator() {
        const typingHtml = `
          <div class="flex items-start typing-indicator animate-fadeIn">
            <div class="w-8 h-8 bg-gradient-to-br from-primary-500 to-primary-600 rounded-full flex items-center justify-center mr-2 flex-shrink-0 shadow-sm">
              <i class="fas fa-robot text-white text-xs"></i>
            </div>
            <div class="bg-white rounded-lg rounded-tl-none p-3 shadow-sm border border-gray-100">
              <div class="flex space-x-1">
                <div class="w-2 h-2 bg-primary-400 rounded-full animate-bounce" style="animation-delay: 0s"></div>
                <div class="w-2 h-2 bg-primary-400 rounded-full animate-bounce" style="animation-delay: 0.2s"></div>
                <div class="w-2 h-2 bg-primary-400 rounded-full animate-bounce" style="animation-delay: 0.4s"></div>
              </div>
            </div>
          </div>
        `;
        chatMessages.append(typingHtml);
        scrollChatToBottom();
      }

      function removeTypingIndicator() {
        $('.typing-indicator').fadeOut(200, function() {
          $(this).remove();
        });
      }

      function scrollChatToBottom() {
        chatMessages.animate({
          scrollTop: chatMessages[0].scrollHeight
        }, 300);
      }

      function escapeHtml(text) {
        const map = {
          '&': '&amp;',
          '<': '&lt;',
          '>': '&gt;',
          '"': '&quot;',
          "'": '&#039;'
        };
        return text.replace(/[&<>"']/g, m => map[m]);
      }

      function formatAiMessage(message) {
        // Convert **bold** to <strong>
        message = message.replace(/\*\*(.+?)\*\*/g, '<strong class="font-semibold text-gray-900">$1</strong>');
        // Convert *italic* to <em>
        message = message.replace(/\*(.+?)\*/g, '<em class="italic">$1</em>');
        // Convert line breaks
        message = message.replace(/\n\n/g, '</p><p class="mt-2">');
        message = message.replace(/\n/g, '<br>');
        // Convert bullet points
        message = message.replace(/^• (.+)$/gm, '<li class="ml-4">• $1</li>');
        // Wrap in paragraph if needed
        if (!message.startsWith('<')) {
          message = '<p>' + message + '</p>';
        }
        return message;
      }

      // Close chat when clicking outside
      $(document).click(function(e) {
        if (!$(e.target).closest('#ai-chatbot-container').length) {
          if (!chatWindow.hasClass('hidden')) {
            chatWindow.addClass('hidden');
          }
        }
      });
    });
  </script>

  <style>
    .rotate-180 {
      transform: rotate(180deg);
    }

    /* Animation keyframes */
    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes slideUp {
      from {
        opacity: 0;
        transform: translateY(20px) scale(0.95);
      }
      to {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }

    .animate-fadeIn {
      animation: fadeIn 0.3s ease-out;
    }

    .animate-slideUp {
      animation: slideUp 0.3s ease-out;
    }

    /* Chatbot button pulse animation */
    #chat-toggle-btn {
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0%, 100% {
        box-shadow: 0 10px 15px -3px rgba(0, 89, 204, 0.3);
      }
      50% {
        box-shadow: 0 10px 25px -3px rgba(0, 89, 204, 0.5);
      }
    }

    /* Custom scrollbar for chat */
    #chat-messages::-webkit-scrollbar {
      width: 6px;
    }

    #chat-messages::-webkit-scrollbar-track {
      background: #f1f5f9;
      border-radius: 10px;
    }

    #chat-messages::-webkit-scrollbar-thumb {
      background: #cbd5e0;
      border-radius: 10px;
    }

    #chat-messages::-webkit-scrollbar-thumb:hover {
      background: #a0aec0;
    }

    /* FAQ hover effects */
    .faq-item {
      transition: all 0.2s ease;
    }

    .faq-item:hover {
      border-color: #0059cc;
      box-shadow: 0 2px 4px rgba(0, 89, 204, 0.1);
    }

    /* Quick action button hover effects */
    .quick-question-btn {
      transition: all 0.2s ease;
    }

    .quick-question-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 6px rgba(0, 89, 204, 0.2);
    }

    /* Mobile responsive adjustments */
    @media (max-width: 768px) {
      #chat-window {
        bottom: 4.5rem !important;
        right: 1rem !important;
        width: calc(100vw - 2rem) !important;
        max-height: calc(100vh - 10rem) !important;
      }
    }
  </style>
</body>
</html>